{{- $production := not .Site.IsServer -}}
<!DOCTYPE html>
<html lang="{{ $.Site.LanguageCode | default "en" }}">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>{{ block "title" . }}{{ .Site.Title }}{{ with .Params.Title }} | {{ . }}{{ end }}{{ end }}</title>
  {{- with cond .IsHome .Site.Params.Description .Description }}
  <meta name="description" content="{{ . }}">
  {{- end }}

  {{- if $production }}
    {{- /* Combine all resources into one. */}}
    {{- $options := (dict "outputStyle" "compressed" "enableSourceMap" 0) }}
    {{- $css := resources.Get "assets/sass/wumpus.scss" | resources.ToCSS $options | slice }}
    {{- range .Site.Data.assets.scss }}
      {{- $css = $css | append (resources.Get . | resources.ToCSS $options | slice) }}
    {{- end }}
    {{- $style := $css | resources.Concat "assets/css/style.css" | fingerprint }}
  <link rel="stylesheet" href="{{ $style.Permalink }}" integrity="{{ $style.Data.Integrity }}">
  {{- else }}
    {{- /* Spell out the resources separately, with nice formatting. */}}
    {{- $options := (dict "outputStyle" "expanded" "enableSourceMap" 1) }}
    {{- $style := resources.Get "assets/sass/wumpus.scss" | resources.ToCSS $options | fingerprint }}
  <link rel="stylesheet" href="{{ $style.Permalink }}" integrity="{{ $style.Data.Integrity }}">
    {{- range .Site.Data.assets.scss }}
      {{- $style := resources.Get . | resources.ToCSS $options | fingerprint }}
  <link rel="stylesheet" href="{{ $style.Permalink }}" integrity="{{ $style.Data.Integrity }}">
    {{- end }}
  {{- end }}

  <meta name="HandheldFriendly" content="True">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="referrer" content="none">
  {{ .Hugo.Generator }}
  <meta name="robots" content="noindex, nofollow">

  <style type="text/css">
input[type="text"] {
  background-color: rgba(0, 0, 0, 0.1);
  border: 2px solid transparent;
  border-radius: 0.2em;
  outline: none;
}
input[type="text"]:focus {
  outline: none;
  border: 2px solid #9ecaed;
  box-shadow: 0 0 10px #9ecaed;
}
#header.has-cover input {
  background-color: rgba(255, 255, 255, 0.2);
}
  </style>
</head>
<body class="{{ partial "content-class.html" . }}">

<div id="wrapper">
  <header id="header" class="{{ partial "content-class.html" . }}"{{ with (cond .IsHome .Site.Params.feature_image .Params.feature_image) }} style="background-image: url('{{ . }}');"{{ end }}>
    {{- /*
         *    Header customisation
         * =======================
         */}}
    {{- block "header" . }}{{- end }}
  </header>

  {{- /*  Main content
       * ===============
       */}}
  <main id="main">
    <div class="speed_up_rendering">
      {{- block "main" . }}
        {{- with .Content }}
      <article class="{{ partial "content-class.html" $ }} main">
        <section class="content">{{ . }}</section>
      </article>
        {{- end }}
      {{- end }}
    </div>
  </main>

  {{- /*    Site footer
       * ==============
       */}}
  <footer id="footer" role="contentinfo">
    <div class="line_over">
      {{- block "footer" . }}
      <section class="credits">
        <span class="copyright"><a href="{{ .Site.BaseURL }}">{{ with .Site.Copyright }}{{ . }}{{ else }}&copy; {{ now.Format "2006" }} {{ .Site.Title }}{{ end }}</a></span>
        <span class="theme">{{ i18n "Theme" }} <a href="//github.com/zutrinken/attila">Attila</a> {{ i18n "By" }} <a href="//zutrinken.com" rel="nofollow">zutrinken</a></span>
        <span class="software">{{ i18n "PublishedWith"}} <a href="//gohugo.io/">Hugo</a></span>
      </section>
      {{- end }}
    </div>
  </footer>

  <label class="hidden-close" for="menu-switch"></label>
</div>
{{- $admin := resources.Get "assets/js/admin.js" }}
{{- $script := slice $admin | resources.Concat "assets/js/script.js" | fingerprint }}
<script type="text/javascript" src="{{ $script.Permalink }}" integrity="{{ $script.Data.Integrity }}"></script>
</body>
</html>
